<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Web AI Hub</title>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; line-height: 1.5; padding: 20px; background: #f8f9fa; color: #212529; }
        #myWrapper { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1 { color: #0d6efd; border-bottom: 2px solid #e9ecef; padding-bottom: 10px; }
        
        /* Status Banner */
        #myStatusBanner { display: none; padding: 12px; margin-bottom: 20px; border-radius: 8px; background: #d1e7dd; border: 1px solid #badbcc; align-items: center; }
        .myDot { height: 10px; width: 10px; background-color: #198754; border-radius: 50%; display: inline-block; margin-right: 10px; }
        
        /* Card Layout */
        .myGrid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .myCard { border: 1px solid #dee2e6; padding: 20px; border-radius: 12px; transition: 0.2s; background: #fff; display: flex; flex-direction: column; }
        .myCard:hover { border-color: #0d6efd; transform: translateY(-2px); }
        h3 { margin-top: 0; color: #0d6efd; font-size: 1.25rem; }
        p { font-size: 0.9rem; color: #6c757d; flex-grow: 1; }
        
        /* Interactive Elements */
        .myBtn, .myLinkBtn { display: inline-block; background: #0d6efd; color: white; padding: 10px 16px; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 0.85rem; cursor: pointer; border: none; text-align: center; margin-top: 10px; }
        .myLinkBtn { background: #6c757d; }
        .myBtn:hover { background: #0b5ed7; }
        .myLinkBtn:hover { background: #5a6268; }
        .tag { font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; background: #e9ecef; color: #495057; font-family: monospace; width: fit-content; }
        
        /* Hidden Sections */
        .myDemoArea { margin-top: 15px; padding: 10px; background: #f1f3f5; border-radius: 8px; display: none; font-size: 0.85rem; }
    </style>
</head>
<body>

<div id="myWrapper">
    <div id="myStatusBanner">
        <span class="myDot"></span>
        <small><strong>Agent Bridge Online:</strong> Node.js MCP server detected at port 3000.</small>
    </div>

    <h1>Student AI Toolkit</h1>
    <p>A central hub for exploring local browser AI and Agent protocols.</p>

    <div class="myGrid">
        
        <div class="myCard">
            <h3>Vision AI (YOLO)</h3>
            <span class="tag">Transformers.js v4</span>
            <p>Runs a Nano-YOLO model to identify objects in images using your GPU.</p>
            <a href="yolo_demo.html" class="myLinkBtn">Open Page</a>
            <button class="myBtn" onclick="myToggleDemo('myVisionDemo')">Show Info</button>
            <div id="myVisionDemo" class="myDemoArea">
                Uses WebGPU for local inference. Works best in Chrome.
            </div>
        </div>

        <div class="myCard">
            <h3>Visitor Counter</h3>
            <span class="tag">WebMCP Protocol</span>
            <p>Exposes your page functions to AI Agents like Claude or GPT.</p>
            <a href="mcp_demo.html" class="myLinkBtn">Open Page</a>
            <button class="myBtn" onclick="myToggleDemo('myMcpDemo')">Show Info</button>
            <div id="myMcpDemo" class="myDemoArea">
                Count: <b id="myCount">0</b><br>
                <small>Tools: <code>myCountVisitor</code>, <code>mySetTheme</code></small>
            </div>
        </div>

        <div class="myCard">
            <h3>Node Container</h3>
            <span class="tag">WebContainers API</span>
            <p>Boot a virtual Linux/Node environment directly inside this tab.</p>
            <a href="node_demo.html" class="myLinkBtn">Open Page</a>
            <button class="myBtn" onclick="myToggleDemo('myNodeDemo')">Show Info</button>
            <div id="myNodeDemo" class="myDemoArea">
                Requires SharedArrayBuffer support (check browser settings).
            </div>
        </div>

        <div class="myCard">
            <h3>Semantic Search</h3>
            <span class="tag">MiniLM Vectors</span>
            <p>Search by concept (e.g. "yellow fruit") instead of exact words.</p>
            <a href="vector_search.html" class="myLinkBtn">Open Page</a>
            <button class="myBtn" onclick="myToggleDemo('myVectorDemo')">Show Info</button>
            <div id="myVectorDemo" class="myDemoArea">
                Calculates cosine similarity locally in the browser.
            </div>
        </div>

    </div>

    <p id="myFooter" style="margin-top:40px; text-align:center; font-size:0.8rem; color:#adb5bd;">
        Hand-coded for Web AI 2026. Keep your terminal open for MCP features.
    </p>
</div>

<script>
    function myToggleDemo(myId) {
        const myElement = document.getElementById(myId);
        myElement.style.display = myElement.style.display === 'block' ? 'none' : 'block';
    }

    async function myCheckServer() {
        const myBanner = document.getElementById('myStatusBanner');
        
        // Safety Check: Detect if running on GitHub Pages
        if (window.location.hostname.includes('github.io')) {
            const myFooter = document.getElementById('myFooter');
            myFooter.innerHTML = "<strong style='color:red'>⚠️ Mixed Content Warning:</strong> You are on GitHub. MCP Server won't connect unless you run this page locally (file:///).";
            return;
        }

        try {
            const myRes = await fetch('http://localhost:3000', { mode: 'cors' });
            if (myRes.ok) {
                myBanner.style.display = 'flex';
            }
        } catch (myError) {
            console.log("MCP Server offline. Dashboard running in standalone mode.");
        }
    }

    async function mySetupMcp() {
        if (navigator.modelContext) {
            await navigator.modelContext.registerTool({
                name: "myCountVisitor",
                description: "Increment the student dashboard counter.",
                execute: async () => {
                    const myCountEl = document.getElementById('myCount');
                    const myNewVal = parseInt(myCountEl.innerText) + 1;
                    myCountEl.innerText = myNewVal;
                    return { content: [{ type: "text", text: `Dashboard updated to ${myNewVal}` }] };
                }
            });
        }
    }

    // Startup
    myCheckServer();
    mySetupMcp();
</script>

</body>
</html>
